! ---------------------------------------------------------
! Device: Core Router (GNS3)
! Role: Inter-VLAN Routing & Internet Gateway
! ---------------------------------------------------------

version 15.0
hostname Cisco-L3-Router

! --- EXEC mode security configuration ---
service password-encryption
! Credentials redacted for security
enable secret <REDACTED>

! --- DHCP ---
ip dhcp excluded-address 192.168.20.1
ip dhcp excluded-address 192.168.30.1

ip dhcp pool KALI
   network 192.168.20.0 255.255.255.0
   default-router 192.168.20.1
   dns-server 8.8.8.8

ip dhcp pool WINDOWS
   network 192.168.30.0 255.255.255.0
   default-router 192.168.30.1
   dns-server 8.8.8.8

! --- Interfaces ---
interface Ethernet0/0.10
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0

interface Ethernet0/0.20
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0

interface Ethernet0/0.30
 encapsulation dot1Q 30
 ip address 192.168.30.1 255.255.255.0
 ip access-group SECURE-VLANS in

interface Ethernet0/1
 description Firewall-Link
 ip address 10.0.0.1 255.255.255.252

! --- Default route, ACL, and logging ---
ip route 0.0.0.0 0.0.0.0 10.0.0.2

ip access-list extended SECURE-VLANS
 permit tcp any host 192.168.10.10 eq 1514
 permit udp any host 192.168.10.10 eq 1514
 permit tcp any host 192.168.10.10 eq 1515
 permit icmp any 192.168.10.0 0.0.0.255
 deny   ip 192.168.30.0 0.0.0.255 192.168.10.0 0.0.0.255
 permit ip any any

logging 192.168.10.10

! --- Console and VTY security configuration ---
! Credentials redacted for security
line con 0
 exec-timeout 0 0
 privilege level 15
 password <REDACTED>
 logging synchronous
 login

line vty 0 4
 password <REDACTED>
 login
 transport input all

end
